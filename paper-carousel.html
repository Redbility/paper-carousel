
<link rel="import" href="../polymer/polymer.html"/>
<link rel="import" href="../iron-icons/image-icons.html"/>
<link rel="import" href="../iron-resizable-behavior/iron-resizable-behavior.html"/>
<link rel="import" href="../paper-styles/color.html"/>
<dom-module id="paper-carousel">
  <template>
    <style>:host{display:block;position:relative;overflow:hidden;--dot-background-color:#ffffff;--dot-active-extra-item:hidden}:host::content .paper-carousel_wrapper{text-align:center;position:relative;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:row wrap;-ms-flex-flow:row wrap;flex-flow:row wrap;-webkit-justify-content:space-around;-ms-flex-pack:distribute;justify-content:space-around;-webkit-align-items:flex-start;-ms-flex-align:start;align-items:flex-start;-webkit-align-content:flex-start;-ms-flex-line-pack:start;align-content:flex-start;width:100%;z-index:1;transition:-webkit-transform .5s ease-in-out;transition:transform .5s ease-in-out;transition:transform .5s ease-in-out,-webkit-transform .5s ease-in-out}:host::content .paper-carousel_controls{position:absolute;width:auto;top:50%;right:10px;left:10px;-webkit-transform:translateY(-50%);transform:translateY(-50%);text-align:center;z-index:1;pointer-events:none}:host::content [class*=paper-carousel_controls_arrow]{color:var(--dot-background-color);pointer-events:auto}:host::content [class*=paper-carousel_controls_arrow] iron-icon{opacity:var(--light-secondary-opacity);-webkit-filter:drop-shadow(0 0 1px rgba(0, 0, 0, .4));filter:drop-shadow(0 0 1px rgba(0, 0, 0, .4));-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-transform:scale(1);transform:scale(1);transition:opacity .2s ease-out,-webkit-filter .2s ease-out,-webkit-transform .2s ease-out;transition:opacity .2s ease-out,filter .2s ease-out,transform .2s ease-out;transition:opacity .2s ease-out,filter .2s ease-out,transform .2s ease-out,-webkit-filter .2s ease-out,-webkit-transform .2s ease-out}:host::content [class*=paper-carousel_controls_arrow] iron-icon:hover{opacity:var(--light-primary-opacity);-webkit-transform:scale(1.15);transform:scale(1.15);-webkit-filter:drop-shadow(0 2px 2px rgba(0, 0, 0, .4));filter:drop-shadow(0 2px 2px rgba(0, 0, 0, .4))}:host::content .paper-carousel_controls_arrow-next{float:right}:host::content .paper-carousel_controls_arrow-prev{float:left}:host::content .paper-carousel_dots_wrapper{position:relative;display:inline-block;margin:0;padding:0;z-index:2}:host::content .paper-carousel_dots{position:absolute;width:100%;text-align:center;z-index:1;bottom:10px;pointer-events:none}:host::content .paper-carousel_dot-line{visibility:var(--dot-active-extra-item);position:absolute;top:0;padding:6px;z-index:2;pointer-events:none;transition:-webkit-transform .2s ease-in-out;transition:transform .2s ease-in-out;transition:transform .2s ease-in-out,-webkit-transform .2s ease-in-out}:host::content .paper-carousel_dot-line::before{content:'';display:block;width:10px;height:10px;background-color:var(--color-red);border-radius:10px}:host::content .paper-carousel_dot{display:inline-block;pointer-events:auto;opacity:var(--light-secondary-opacity);-webkit-filter:drop-shadow(0 0 2px rgba(0, 0, 0, .4));filter:drop-shadow(0 0 2px rgba(0, 0, 0, .4));-webkit-transform-origin:center;transform-origin:center;-webkit-transform:scale(1);transform:scale(1);transition:opacity .6s cubic-bezier(.25,.8,.25,1),-webkit-transform .6s cubic-bezier(.25,.8,.25,1),-webkit-filter .6s cubic-bezier(.25,.8,.25,1);transition:transform .6s cubic-bezier(.25,.8,.25,1),opacity .6s cubic-bezier(.25,.8,.25,1),filter .6s cubic-bezier(.25,.8,.25,1);transition:transform .6s cubic-bezier(.25,.8,.25,1),opacity .6s cubic-bezier(.25,.8,.25,1),filter .6s cubic-bezier(.25,.8,.25,1),-webkit-transform .6s cubic-bezier(.25,.8,.25,1),-webkit-filter .6s cubic-bezier(.25,.8,.25,1);-webkit-backface-visibility:hidden;backface-visibility:hidden}:host::content .paper-carousel_dot.active{opacity:var(--light-primary-opacity);-webkit-filter:drop-shadow(0 1px 3px rgba(0, 0, 0, .4));filter:drop-shadow(0 1px 3px rgba(0, 0, 0, .4));-webkit-transform:scale(1.15);transform:scale(1.15)}:host::content .paper-carousel_dot a{position:relative;display:block;padding:6px;color:var(--dot-background-color);font-size:.8125em;line-height:2em;font-weight:400;text-decoration:none}:host::content .paper-carousel_dot a::before{content:'';display:block;width:8px;height:8px;background-color:var(--dot-background-color);border-radius:8px}:host::content [class*=paper-carousel-demo]{position:relative;height:400px}:host::content [class*=paper-carousel-demo]::before{position:absolute;content:attr(data-text);color:var(--dot-background-color);font-size:3rem;font-weight:700;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}:host::content .paper-carousel-demo-indigo{background-color:var(--paper-indigo-500)}:host::content .paper-carousel-demo-pink{background-color:var(--paper-pink-500)}:host::content .paper-carousel-demo-teal{background-color:var(--paper-teal-500)}:host::content .paper-carousel-demo-amber{background-color:var(--paper-amber-500)}:host::content .paper-carousel-demo-green{background-color:var(--paper-green-500)}:host::content .paper-carousel-demo-blue{background-color:var(--paper-blue-500)}</style>
    <div class="paper-carousel_wrapper">
      <content></content>
    </div>
  </template>
  <script>(function(){Polymer({is:"paper-carousel",behaviors:[Polymer.IronResizableBehavior],listeners:{"iron-resize":"onResize"},items:function(){var t,e,r,i,o,s;if(i=this,o=i.getBoundingClientRect(),null!==i.getAttribute("responsive"))for(r=i.getAttribute("responsive").replace(/\s/g,"").split(","),e=0;e<r.length;){if(t=r[e].split(":"),s=r[e+1]?r[e+1].split(":"):{0:0},o.width<=t[0]&&o.width>s[0])return t[1];e++}return null!==i.getAttribute("items")?i.getAttribute("items"):1},dotText:function(){var t,e;return t=this,e=t.getAttribute("dotText"),null===e||"false"!==e},getTotalItems:function(){var t,e;return t=this,e=t.querySelector(".paper-carousel_wrapper"),e.children.length},getPages:function(){var t,e,r,i;for(e=this,t=1,r=[],i=[];t<=this.getTotalItems();)r.push(t-1),t%this.items()===0&&(i.push(r),r=[]),t===this.getTotalItems()&&i.push(r),t++;return i},getTotalPages:function(){var t;return t=this,Math.ceil(this.getTotalItems()/this.items())},getContainerPosition:function(){var t,e,r,i,o;return t=this,e=t.querySelector(".paper-carousel_wrapper"),r=e.style.transform,o=0,""!==r&&(i=r.match(/translateX\((.*)/)[0],o=i.match(/\((.*)\)/)[0],o=o.substr(1,o.length-2),o=parseFloat(o)),o},getCurrentItem:function(){var t,e;for(e=Math.round(100/this.getTotalItems()*1e3)/1e3,t=0;t<=this.getTotalItems();){if(Math.round(e*t*1e3)/1e3===-this.getContainerPosition())return t;t++}},goToItem:function(t){var e,r,i,o;return r=this,i=r.querySelector(".paper-carousel_wrapper"),e=Math.round(100/this.getTotalItems()*1e3)/1e3,o=Math.round(t*-e*1e3)/1e3,t<this.getTotalItems()&&t>=0&&(i.style.transform="translateX("+o+"%)"),this._setActiveDot(this.getCurrentPage())},goToNextItem:function(){var t;if(t=Math.round(100/this.getTotalItems()*1e3)/1e3,this.getContainerPosition()>-(this.getTotalItems()-this.items()-1)*t-5)return this.goToItem(this.getCurrentItem()+1)},goToPrevItem:function(){var t;if(t=Math.round(100/this.getTotalItems()*1e3)/1e3,this.getContainerPosition()<-5)return this.goToItem(this.getCurrentItem()-1)},getCurrentPage:function(){var t,e,r,i,o;for(t=Math.round(100/this.getTotalItems()*1e3)/1e3,o=t*this.items(),i=0;i<this.getPages().length;){if(r=this.getPages()[i],e=parseFloat(this.getCurrentItem())+parseFloat(this.items()),e>=this.getTotalItems())return this.goToPage(this.getTotalPages()-1),this.getTotalPages()-1;if(r.indexOf(this.getCurrentItem())!==-1)return i;i++}},goToPage:function(t){var e,r,i,o,s;return r=this,i=r.querySelector(".paper-carousel_wrapper"),e=Math.round(100/this.getTotalItems()*1e3)/1e3,s=this.getPages()[t].length,o=Math.round(t*s*-e*1e3)/1e3,t<this.getTotalPages()&&t>=0&&(i.style.transform="translateX("+o+"%)"),this._setActiveDot(t)},goToNextPage:function(){var t;if(t=Math.round(100/this.getTotalItems()*1e3)/1e3,this.getContainerPosition()>-(this.getTotalItems()-this.items()-1)*t-5)return this.goToPage(this.getCurrentPage()+1)},goToPrevPage:function(){var t;return t=Math.round(100/this.getTotalItems()*1e3)/1e3,this.getContainerPosition()<-5&&this.goToPage(this.getCurrentPage()-1),this._setActiveDot(this.getCurrentPage())},_setContainerSize:function(){var t,e,r,i,o,s,n,a,l;for(s=this,a=s.querySelector(".paper-carousel_wrapper"),n=s.getBoundingClientRect(),r=n.width*this.getTotalItems()/this.items(),e=Math.round(100/this.getTotalItems()*1e4)/1e4,l=a.children,i=0,o=l.length;i<o;i++)t=l[i],t.style.width=e+"%";return a.style.minWidth=r+"px"},_setActiveDot:function(t){var e,r,i,o;for(o=this,r=o.querySelectorAll(".paper-carousel_dot"),e=o.querySelector(".paper-carousel_dot-line"),i=0;i<r.length;)i===parseInt(t)?r[t].classList.add("active"):r[i].classList.remove("active"),i++;if(e)return e.style.transform="translateX("+t+"00%)"},_printControls:function(){var t,e,r,i,o,s,n,a;if(i=this,r=1,"false"!==i.getAttribute("controls"))return t=document.createElement("div"),t.classList.add("paper-carousel_controls"),e=document.createElement("div"),e.classList.add("paper-carousel_controls_wrapper"),o=document.createElement("a"),s=document.createElement("iron-icon"),s.setAttribute("icon","image:navigate-next"),n=document.createElement("a"),a=document.createElement("iron-icon"),a.setAttribute("icon","image:navigate-before"),o.setAttribute("href",""),o.classList.add("paper-carousel_controls_arrow-next"),n.setAttribute("href",""),n.classList.add("paper-carousel_controls_arrow-prev"),o.addEventListener("click",function(t){return t.preventDefault()}),n.addEventListener("click",function(t){return t.preventDefault()}),i.listen(o,"tap","goToNextItem"),i.listen(n,"tap","goToPrevItem"),Polymer.dom(o).appendChild(s),Polymer.dom(n).appendChild(a),Polymer.dom(t).appendChild(e),Polymer.dom(e).appendChild(n),Polymer.dom(e).appendChild(o),this.getTotalPages()>1?Polymer.dom(i.root).appendChild(t):void 0},_printDots:function(){var t,e,r,i,o,s,n;if(n=this,s=1,"false"!==n.getAttribute("dots")&&(i=document.createElement("div"),i.classList.add("paper-carousel_dots"),o=document.createElement("ul"),o.classList.add("paper-carousel_dots_wrapper"),Polymer.dom(i).appendChild(o),n.tpages!==this.items())){for(n.tpages=this.items(),n.querySelector(".paper-carousel_dots")&&n.querySelector(".paper-carousel_dots").remove();s<=this.getTotalPages();)e=document.createElement("li"),e.classList.add("paper-carousel_dot"),r=document.createElement("a"),r.setAttribute("href",""),r.setAttribute("data-rel",s-1),n.clickDotsEvent=function(t){var e;return e=t.target.getAttribute("data-rel"),this.goToPage(e)},r.addEventListener("click",function(t){return t.preventDefault()}),n.listen(r,"tap","clickDotsEvent"),this.dotText()===!0&&(r.textContent=s),t=document.createElement("li"),t.classList.add("paper-carousel_dot-line"),Polymer.dom(e).appendChild(r),Polymer.dom(o).appendChild(e),s===this.getTotalPages()&&Polymer.dom(o).appendChild(t),s++;return this.getTotalPages()>1&&Polymer.dom(n.root).appendChild(i),this._setActiveDot(this.getCurrentPage())}},_getDragState:function(t){var e,r,i,o,s,n,a,l,u,h,g,c,d,m,p,f,P;switch(l=this,u=l.querySelector(".paper-carousel_wrapper"),h=u.getBoundingClientRect(),g=Math.round(100*t.detail.dx/h.width*1e3)/1e3,s=Math.round(100/this.getTotalItems()*1e3)/1e3,a=Math.round(s*(this.getTotalItems()-this.items())*1e3)/1e3,i=0,t.detail.state){case"start":return l.startTime=(new Date).getTime(),l.dragPosition=this.getContainerPosition(),u.style.transitionDuration="0s";case"track":return d=Math.round(1e3*(l.dragPosition+g))/1e3,d=Math.min(d,0),d=Math.max(d,-a),u.style.transform="translateX("+d+"%)";case"end":for(i=(new Date).getTime(),P=i-l.startTime,n=Math.max(Math.min(P,500),100),o=0,u.style.transitionDuration=n+"ms",l.resetTransition=function(){return u.style.transitionDuration=""},l.listen(u,"transitionend","resetTransition"),m=[];o<this.getTotalItems();)p=-Math.round(s*o*1e3)/1e3,e=-Math.round(s*(o+1)*1e3)/1e3,c=Math.round(1e3*(p-e))/1e3,r=e+c/2,f=p-c/2,g<0&&P<150&&this.getContainerPosition()<p&&this.getContainerPosition()>=e&&this.goToItem(o+1),g>0&&P<150&&this.getContainerPosition()<p&&this.getContainerPosition()>=e&&this.goToItem(o),this.getContainerPosition()<p&&this.getContainerPosition()>=r&&this.goToItem(o),this.getContainerPosition()<f&&this.getContainerPosition()>=e&&this.goToItem(o+1),m.push(o++);return m}},_onDrag:function(){var t,e;return t=this,e=t.querySelector(".paper-carousel_wrapper"),t.listen(this.$$(".paper-carousel_wrapper"),"track","_getDragState")},ready:function(){},attached:function(){return this._printControls(),this._onDrag()},onResize:function(){return this._setContainerSize(),this._printDots()}})}).call(this);</script>
</dom-module>